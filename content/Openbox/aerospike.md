---
{"dg-publish":true,"date":"2022-01-16T11:19:50+03:00","modified_at":"2022-01-16T11:19:50+03:00","permalink":"/aerospike/","dgHomeLink":false,"dgPassFrontmatter":true}
---



Aerospike - это кластерная база данных, которую упрощённо можно описать как кластерный redis на стероидах.
Существенным отличием является встроенная кластеризация, репликация и редаширование хранимых данных.
Профиль нагрузки на проде, который был: 4k wps / 100k rps.

## Плюсы

- Простота в обслуживание: можно отдавать blob devices без файловой системы, решардинг внутренний, встроенная админка.
- Запись идёт мастер-мастер, поэтому масштабирование записи идёт паралельно с масшатабированием кластера.
- Можно выбрать репликацию в требуемом количестве копий.
- Все родные клиенты - обёртки над C клиентом. // как плюс, так и минус, потому что в golang cgo имеет сильный оверхед
- Можно писать хранимки на lua.
- В отличие от redis, многопоточен из коробки.

## Минусы

- Вне зависимости от размера ключа хранит в памяти B-Tree всех ключей, из-за этого есть ограничение на количество (не размер) ключей в базе в зависимости от количества доступного RAM.
- Долгий холодный старт, при 1.5 тб данных на SSD дисках - это где-то от 15 до 30 минут. Это время база берёт, чтобы построить BTree в оперативку.
- Коннекты в библиотеках идёт к каждому серверу в кластере.
- aql (язык запросов по дополнительным фильтрам) работает отвратительно медленно по сравнению с обычным GET.
- Размер записи в ключ органичен сверху (в 4ке было пол мегабайта, сейчас в пятой уже подняли до 10).

## Источники

- [Limitations](https://www.aerospike.com/docs/guide/limitations.html)
